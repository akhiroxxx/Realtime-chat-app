{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Akhilesh/OneDrive/Desktop/MERN-CHAT-APP/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Akhilesh/OneDrive/Desktop/MERN-CHAT-APP/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Akhilesh/OneDrive/Desktop/MERN-CHAT-APP/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{ChatState}from\"../Context/ChatProvider\";import{Box,Button,Stack,Text,useToast}from\"@chakra-ui/react\";import axios from\"axios\";import{AddIcon}from\"@chakra-ui/icons\";import ChatLoading from\"./ChatLoading\";import{getSender}from\"../config/ChatLogics\";import GroupChatModal from\"./miscellaneous/GroupChatModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyChats=function MyChats(_ref){var fetchAgain=_ref.fetchAgain;var _useState=useState(),_useState2=_slicedToArray(_useState,2),loggedUser=_useState2[0],setLoggedUser=_useState2[1];var _ChatState=ChatState(),selectedChat=_ChatState.selectedChat,setSelectedChat=_ChatState.setSelectedChat,user=_ChatState.user,chats=_ChatState.chats,setChats=_ChatState.setChats;var toast=useToast();var fetchChats=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,_yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;config={headers:{Authorization:\"Bearer \".concat(user.token)}};_context.next=4;return axios.get(\"/api/chat\",config);case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(data);setChats(data);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);toast({title:\"Error Occured!\",description:\"Failed to Load the chats\",status:\"error\",duration:5000,isClosable:true,position:\"bottom-left\"});case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function fetchChats(){return _ref2.apply(this,arguments);};}();useEffect(function(){setLoggedUser(JSON.parse(localStorage.getItem(\"userInfo\")));fetchChats();},[fetchAgain]);return/*#__PURE__*/_jsxs(Box,{display:{base:selectedChat?\"none\":\"flex\",md:\"flex\"},flexDir:\"column\",alignItems:\"center\",p:3,bg:\"white\",w:{base:\"100%\",md:\"31%\"},borderRadius:\"lg\",borderWidth:\"1px\",children:[/*#__PURE__*/_jsxs(Box,{pb:3,px:3,fontSize:{base:\"28px\",md:\"30px\"},fontFamily:\"Work sans\",display:\"flex\",w:\"100%\",justifyContent:\"space-between\",alignItems:\"center\",children:[\"My Chats\",/*#__PURE__*/_jsx(GroupChatModal,{children:/*#__PURE__*/_jsx(Button,{display:\"flex\",fontSize:{base:\"17px\",md:\"10px\",lg:\"17px\"},rightIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"New Group Chat\"})})]}),/*#__PURE__*/_jsx(Box,{display:\"flex\",flexDir:\"column\",p:3,bg:\"#F8F8F8\",w:\"100%\",h:\"100%\",borderRadius:\"lg\",overflowY:\"hidden\",children:chats?/*#__PURE__*/_jsx(Stack,{overflowY:\"scroll\",children:chats.map(function(chat){return/*#__PURE__*/_jsx(Box,{onClick:function onClick(){return setSelectedChat(chat);},cursor:\"pointer\",bg:selectedChat===chat?\"#38B2AC\":\"#E8E8E8\",color:selectedChat===chat?\"white\":\"black\",px:3,py:2,borderRadius:\"lg\",children:/*#__PURE__*/_jsx(Text,{children:!chat.isGroupChat?getSender(loggedUser,chat.users):chat.chatName})},chat._id);})}):/*#__PURE__*/_jsx(ChatLoading,{})})]});};export default MyChats;","map":{"version":3,"names":["React","useEffect","useState","ChatState","Box","Button","Stack","Text","useToast","axios","AddIcon","ChatLoading","getSender","GroupChatModal","jsx","_jsx","jsxs","_jsxs","MyChats","_ref","fetchAgain","_useState","_useState2","_slicedToArray","loggedUser","setLoggedUser","_ChatState","selectedChat","setSelectedChat","user","chats","setChats","toast","fetchChats","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","_yield$axios$get","data","wrap","_callee$","_context","prev","next","headers","Authorization","concat","token","get","sent","console","log","t0","title","description","status","duration","isClosable","position","stop","apply","arguments","JSON","parse","localStorage","getItem","display","base","md","flexDir","alignItems","p","bg","w","borderRadius","borderWidth","children","pb","px","fontSize","fontFamily","justifyContent","lg","rightIcon","h","overflowY","map","chat","onClick","cursor","color","py","isGroupChat","users","chatName","_id"],"sources":["C:/Users/Akhilesh/OneDrive/Desktop/MERN-CHAT-APP/frontend/src/components/MyChats.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { ChatState } from \"../Context/ChatProvider\";\r\nimport { Box, Button, Stack, Text, useToast } from \"@chakra-ui/react\";\r\nimport axios from \"axios\";\r\nimport { AddIcon } from \"@chakra-ui/icons\";\r\nimport ChatLoading from \"./ChatLoading\";\r\nimport { getSender } from \"../config/ChatLogics\";\r\nimport GroupChatModal from \"./miscellaneous/GroupChatModal\";\r\nconst MyChats = ({ fetchAgain }) => {\r\n  const [loggedUser, setLoggedUser] = useState();\r\n  const { selectedChat, setSelectedChat, user, chats, setChats } = ChatState();\r\n  const toast = useToast();\r\n\r\n  const fetchChats = async () => {\r\n    // console.log(user._id);\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          Authorization: `Bearer ${user.token}`,\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.get(\"/api/chat\", config);\r\n      console.log(data);\r\n      setChats(data);\r\n    } catch (error) {\r\n      toast({\r\n        title: \"Error Occured!\",\r\n        description: \"Failed to Load the chats\",\r\n        status: \"error\",\r\n        duration: 5000,\r\n        isClosable: true,\r\n        position: \"bottom-left\",\r\n      });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    setLoggedUser(JSON.parse(localStorage.getItem(\"userInfo\")));\r\n    fetchChats();\r\n  }, [fetchAgain]);\r\n  return (\r\n    <Box\r\n      display={{ base: selectedChat ? \"none\" : \"flex\", md: \"flex\" }}\r\n      flexDir=\"column\"\r\n      alignItems=\"center\"\r\n      p={3}\r\n      bg=\"white\"\r\n      w={{ base: \"100%\", md: \"31%\" }}\r\n      borderRadius=\"lg\"\r\n      borderWidth=\"1px\"\r\n    >\r\n      <Box\r\n        pb={3}\r\n        px={3}\r\n        fontSize={{ base: \"28px\", md: \"30px\" }}\r\n        fontFamily=\"Work sans\"\r\n        display=\"flex\"\r\n        w=\"100%\"\r\n        justifyContent=\"space-between\"\r\n        alignItems=\"center\"\r\n      >\r\n        My Chats\r\n        <GroupChatModal>\r\n          <Button\r\n            display=\"flex\"\r\n            fontSize={{ base: \"17px\", md: \"10px\", lg: \"17px\" }}\r\n            rightIcon={<AddIcon />}\r\n          >\r\n            New Group Chat\r\n          </Button>\r\n        </GroupChatModal>\r\n      </Box>\r\n      <Box\r\n        display=\"flex\"\r\n        flexDir=\"column\"\r\n        p={3}\r\n        bg=\"#F8F8F8\"\r\n        w=\"100%\"\r\n        h=\"100%\"\r\n        borderRadius=\"lg\"\r\n        overflowY=\"hidden\"\r\n      >\r\n        {chats ? (\r\n          <Stack overflowY=\"scroll\">\r\n            {chats.map((chat) => (\r\n              <Box\r\n                onClick={() => setSelectedChat(chat)}\r\n                cursor=\"pointer\"\r\n                bg={selectedChat === chat ? \"#38B2AC\" : \"#E8E8E8\"}\r\n                color={selectedChat === chat ? \"white\" : \"black\"}\r\n                px={3}\r\n                py={2}\r\n                borderRadius=\"lg\"\r\n                key={chat._id}\r\n              >\r\n                <Text>\r\n                  {!chat.isGroupChat\r\n                    ? getSender(loggedUser, chat.users)\r\n                    : chat.chatName}\r\n                </Text>\r\n              </Box>\r\n            ))}\r\n          </Stack>\r\n        ) : (\r\n          <ChatLoading />\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default MyChats;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}